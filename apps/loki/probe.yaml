apiVersion: monitoring.coreos.com/v1
kind: Probe
metadata:
  name: loki-get-static-urls-30s
spec:
  jobName: loki-get-static-urls-30s
  interval: 30s
  module: http_2xx_30s
  scrapeTimeout: 30s
  prober:
    url: blackbox-exporter.blackbox-exporter.svc.cluster.local.:19115
  targets:
    staticConfig:
      static:
        - http://loki-distributor.loki.svc.cluster.local.:3100/ready
        - http://loki-compactor.loki.svc.cluster.local.:3100/ready
        - http://loki-index-gateway-headless.loki.svc.cluster.local.:3100/ready
        - http://loki-ingester.loki.svc.cluster.local.:3100/ready
        - http://loki-gateway.loki.svc.cluster.local.:80
        - http://loki-querier.loki.svc.cluster.local.:3100/ready
        - http://loki-query-frontend.loki.svc.cluster.local.:3100/ready
        - http://loki-query-scheduler-discovery.loki.svc.cluster.local.:3100/ready
        - http://loki-ruler.loki.svc.cluster.local.:3100/ready
---
apiVersion: monitoring.coreos.com/v1
kind: Probe
metadata:
  name: loki-tcp-30s
spec:
  jobName: loki-tcp-30s
  interval: 30s
  scrapeTimeout: 30s
  module: tcp_connect
  prober:
    url: blackbox-exporter.blackbox-exporter.svc.cluster.local.:19115
  targets:
    staticConfig:
      static:
        - loki-results-cache.loki.svc.cluster.local.:11211
        # - loki-mcrouter.loki.svc.cluster.local.:5000
