apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  labels:
    app.kubernetes.io/component: receive
    app.kubernetes.io/instance: thanos-receive
    app.kubernetes.io/name: thanos-receive
    app.kubernetes.io/version: v0.40.1
  name: thanos-receive
spec:
  # With 3 replicas and replication-factor=2, quorum = (2/2)+1 = 2 pods needed
  # maxUnavailable: 1 ensures 2 pods remain available during disruptions
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: receive
      app.kubernetes.io/instance: thanos-receive
      app.kubernetes.io/name: thanos-receive
