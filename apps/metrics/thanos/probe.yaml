apiVersion: monitoring.coreos.com/v1
kind: Probe
metadata:
  name: thanos-http-30s
spec:
  jobName: thanos-http-30s
  interval: 30s
  scrapeTimeout: 30s
  module: http_2xx_30s
  prober:
    url: blackbox-exporter.blackbox-exporter.svc.cluster.local.:19115
  targets:
    staticConfig:
      static:
        - http://thanos-query.thanos.svc.cluster.local.:9090/-/healthy
        - http://thanos-query-frontend.thanos.svc.cluster.local.:9090/-/healthy
        - http://thanos-ruler-operated.thanos:10902/-/healthy
        - http://thanos-compact.thanos:10902/-/healthy
        - http://thanos-store.thanos:10902/-/healthy
---
apiVersion: monitoring.coreos.com/v1
kind: Probe
metadata:
  name: thanos-tcp-30s
spec:
  jobName: thanos-tcp-30s
  interval: 30s
  scrapeTimeout: 30s
  module: tcp_connect
  prober:
    url: blackbox-exporter.blackbox-exporter.svc.cluster.local.:19115
  targets:
    staticConfig:
      static:
        - thanos-query-frontend-redis.thanos.svc.cluster.local.:6379
        # - thanos-memcached-index.thanos.svc.cluster.local.:11211
